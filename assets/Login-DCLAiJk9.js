import{t as e}from"./password-input-DDcixrnF.js";import{C as t,G as n,H as r,I as i,J as a,K as o,L as s,P as c,Q as l,S as u,V as d,W as f,X as p,Y as m,Z as h,b as g,c as _,h as v,l as y,q as b,v as x,w as S}from"./index-BL9xHhRW.js";var C=l(h()),w=l(r());function T(){let r=b(),o=m(),{t:l}=f(),[h]=a(),_=p(g),{register:x,handleSubmit:C,formState:{errors:T}}=s({resolver:i(v)});return(0,w.jsxs)(`form`,{onSubmit:C(async e=>{o(t());try{let t=await c.login(e);if(t.access_token&&localStorage.setItem(`access_token`,t.access_token),t.refresh_token&&localStorage.setItem(`refresh_token`,t.refresh_token),t.user&&localStorage.setItem(`user`,JSON.stringify(t.user)),t.user.verified){let e=h.get(`continue`)||`/`;r(e),o(S(t)),n.success(`${l(`login_success`)}: ${l(`greeting`,{username:t.user.username})}`)}else r(`/verify-email?token=${t.access_token}`),n.info(`${l(`login_success`)}`)}catch(e){let t=typeof e==`string`?e:e.response?.data?.message||e.message||`Unknown Error`;o(u(e)),n.error(`${l(`login_fail`)}: ${t}`)}}),className:`w-full flex flex-col gap-2`,children:[(0,w.jsx)(y,{type:`text`,placeholder:l(`email`),...x(`username`),className:`
                        h-12
                        bg-background
                        border-input-border
                        rounded-2xl
                        text-normaltext
                        placeholder:text-normaltext-tertiary
                        ${T.username?`border-destructive`:``}
                        `,disabled:_}),T.username&&(0,w.jsx)(`p`,{className:`text-destructive`,children:T.username.message}),(0,w.jsx)(e,{placeholder:l(`password`),...x(`password`),className:`h-12 bg-background border-input-border rounded-xl
                    text-normaltext placeholder:text-normaltext-tertiary
                    ${T.password?`border-destructive`:``}
                  `,disabled:_}),T.password&&(0,w.jsx)(`p`,{className:`text-destructive`,children:T.password.message}),(0,w.jsx)(d,{type:`submit`,className:`w-full h-12 bg-foreground text-background !hover:bg-systemtext cursor-pointer rounded-2xl`,disabled:_,children:l(_?`loging_in`:`login`)})]})}var E=T;function D(){let e=b(),[t]=a(),{t:n}=f(),r=x();return(0,C.useEffect)(()=>{if(r)if(r.verified){let n=t.get(`continue`)||`/`;e(n)}else `${localStorage.getItem(`access_token`)}`},[r,e,t]),(0,w.jsxs)(`div`,{className:`max-w-[370px] min-w-[300px] p-6!flex flex-col gap-2 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2`,children:[(0,w.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,w.jsx)(`h1`,{className:`text-center text-xl! sm:my-4 text-foreground font-bold!`,children:n(`login_threads`)}),(0,w.jsx)(E,{}),(0,w.jsx)(`div`,{className:`text-center mt-2.5!`,children:(0,w.jsx)(o,{to:`/auth/forgot-password`,className:`text-foreground font-bold! hover:text-(--systemtext)`,children:n(`forgot_psw`)})}),(0,w.jsxs)(`div`,{className:`relative my-6!`,children:[(0,w.jsx)(_,{className:`bg-normaltext!`}),(0,w.jsx)(`span`,{className:`absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 px-4 text-sm text-systemtext!`,children:n(`or`)})]})]}),(0,w.jsxs)(`div`,{className:`text-center`,children:[n(`havent_got_account`),(0,w.jsx)(o,{to:`/auth/register`,className:`text-foreground font-bold! hover:text-(--systemtext)`,children:n(`register`)}),n(`or`),(0,w.jsx)(o,{to:`/`,className:`text-foreground font-bold! hover:text-(--systemtext)`,children:n(`home`)})]})]})}var O=D;export{O as default};