import{t as e}from"./password-input-B-AdPmP3.js";import{A as t,E as n,G as r,H as i,I as a,J as o,K as s,O as c,Q as l,V as u,W as d,X as f,Y as p,Z as m,b as h,c as g,h as _,k as v,l as y,q as b,w as x,y as S}from"./index-CsGwgG2_.js";var C=l(m()),w=l(i());function T(){let i=b(),s=p(),{t:l}=d(),[m]=o(),g=f(n),{register:x,handleSubmit:C,formState:{errors:T}}=h({resolver:S(_)});return(0,w.jsxs)(`form`,{onSubmit:C(async e=>{s(v());try{let n=await a.login(e);if(n.access_token&&localStorage.setItem(`access_token`,n.access_token),n.refresh_token&&localStorage.setItem(`refresh_token`,n.refresh_token),n.user&&localStorage.setItem(`user`,JSON.stringify(n.user)),n.user.verified){let e=m.get(`continue`)||`/`;i(e),s(t(n)),r.success(`${l(`login_success`)}: ${l(`greeting`,{username:n.user.username})}`)}else i(`/verify-email?token=${n.access_token}`),r.info(`${l(`login_success`)}`)}catch(e){let t=typeof e==`string`?e:e.response?.data?.message||e.message||`Unknown Error`;s(c(e)),r.error(`${l(`login_fail`)}: ${t}`)}}),className:`w-full flex flex-col gap-2`,children:[(0,w.jsx)(y,{type:`text`,placeholder:l(`email`),...x(`username`),className:`
                        h-12
                        bg-background
                        border-input-border
                        rounded-2xl
                        text-normaltext
                        placeholder:text-normaltext-tertiary
                        ${T.username?`border-destructive`:``}
                        `,disabled:g}),T.username&&(0,w.jsx)(`p`,{className:`text-destructive`,children:T.username.message}),(0,w.jsx)(e,{placeholder:l(`password`),...x(`password`),className:`h-12 bg-background border-input-border rounded-xl
                    text-normaltext placeholder:text-normaltext-tertiary
                    ${T.password?`border-destructive`:``}
                  `,disabled:g}),T.password&&(0,w.jsx)(`p`,{className:`text-destructive`,children:T.password.message}),(0,w.jsx)(u,{type:`submit`,className:`w-full h-12 bg-foreground text-background !hover:bg-systemtext cursor-pointer rounded-2xl`,disabled:g,children:l(g?`loging_in`:`login`)})]})}var E=T;function D(){let e=b(),[t]=o(),{t:n}=d(),r=x();return(0,C.useEffect)(()=>{if(r)if(r.verified){let n=t.get(`continue`)||`/`;e(n)}else `${localStorage.getItem(`access_token`)}`},[r,e,t]),(0,w.jsxs)(`div`,{className:`max-w-[370px] min-w-[300px] p-6!flex flex-col gap-2 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2`,children:[(0,w.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,w.jsx)(`h1`,{className:`text-center text-xl! sm:my-4 text-foreground font-bold!`,children:n(`login_threads`)}),(0,w.jsx)(E,{}),(0,w.jsx)(`div`,{className:`text-center mt-2.5!`,children:(0,w.jsx)(s,{to:`/auth/forgot-password`,className:`text-foreground font-bold! hover:text-(--systemtext)`,children:n(`forgot_psw`)})}),(0,w.jsxs)(`div`,{className:`relative my-6!`,children:[(0,w.jsx)(g,{className:`bg-normaltext!`}),(0,w.jsx)(`span`,{className:`absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 px-4 text-sm text-systemtext!`,children:n(`or`)})]})]}),(0,w.jsxs)(`div`,{className:`text-center`,children:[n(`havent_got_account`),(0,w.jsx)(s,{to:`/auth/register`,className:`text-foreground font-bold! hover:text-(--systemtext)`,children:n(`register`)}),n(`or`),(0,w.jsx)(s,{to:`/`,className:`text-foreground font-bold! hover:text-(--systemtext)`,children:n(`home`)})]})]})}var O=D;export{O as default};