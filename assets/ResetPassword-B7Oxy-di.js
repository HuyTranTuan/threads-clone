import{t as e}from"./password-input-B-AdPmP3.js";import{G as t,H as n,I as r,K as i,L as a,Q as o,R as s,W as c,Z as l,_ as u,b as d,c as f,f as p,q as m,y as h}from"./index-CsGwgG2_.js";var g=o(l()),_=o(n()),v=({token:n,email:i})=>{let o=m(),[l,f]=(0,g.useState)(!1),{t:v}=c(),[y,b]=(0,g.useState)(``),[x,S]=(0,g.useState)(``),[C,w]=(0,g.useState)(``),{register:T,handleSubmit:E,clearErrors:D,formState:{errors:O}}=d({resolver:h(u),mode:`onChange`}),k=(0,g.useCallback)(a(e=>{if(!e){b(``);return}isValidPassword(e)?b(``):(b(v(`password_at_least`)),D(`password`))},700),[]),A=(0,g.useCallback)(a(e=>{if(!e){S(``);return}s(C,e)?S(``):(S(v(`confirmpassword_not_match`)),D(`password_confirmation`))},700),[C]);return(0,_.jsxs)(`form`,{onSubmit:E(async e=>{f(!0);try{await r.resetPassword({token:n,email:i,password:e.password,password_confirmation:e.password_confirmation}),t.success(v(`create_new_password_successed`)),setTimeout(()=>{o(`/login`,{state:{message:v(`create_new_password_successed`)}})},1500)}catch(e){let n=e.response?.data?.message||v(`cannot_new_password`);t.error(v(`create_new_password_failed`),{description:n})}finally{f(!1)}}),className:`w-full flex flex-col gap-2`,children:[(0,_.jsx)(e,{placeholder:v(`new_password`),...T(`password`),onChange:e=>{let t=e.target.value;T(`password`).onChange(e),w(t),k(t)},className:`h-12 bg-threaditembg border-input-border rounded-xl text-normaltext placeholder:text-systemtext${O.password||y?`border-destructive`:``}`,disabled:l}),y&&(0,_.jsx)(`p`,{className:`text-destructive`,children:y}),O.password&&(0,_.jsx)(`p`,{className:`text-destructive`,children:O.password.message}),(0,_.jsx)(e,{placeholder:v(`confirm_password`),...T(`password_confirmation`),onChange:e=>{T(`password_confirmation`).onChange(e),A(e.target.value)},className:`h-12 bg-threaditembg border-input-border rounded-xl text-normaltext placeholder:text-systemtext${O.password_confirmation||x?`border-destructive`:``}`,disabled:l}),x&&(0,_.jsx)(`p`,{className:`text-destructive`,children:x}),O.password_confirmation&&(0,_.jsx)(`p`,{className:`text-destructive`,children:O.password_confirmation.message}),(0,_.jsx)(p,{type:`submit`,className:`w-full h-12 bg-foreground text-background !hover:bg-systemtext cursor-pointer rounded-2xl`,disabled:l,children:v(l?`processing`:`create_new_password`)})]})};function y(){let{t:e}=c();return(0,_.jsx)(`div`,{className:`max-w-[370px] min-w-[300px] p-6!flex flex-col gap-2 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2`,children:(0,_.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,_.jsx)(`h1`,{className:`text-center text-xl! sm:my-4 text-foreground font-bold!`,children:e(`forgot_psw`)}),(0,_.jsx)(`p`,{className:`text-center text-sm! text-(--systemtext) mb-6!`,children:e(`enter_email_recive_link`)}),(0,_.jsx)(v,{}),(0,_.jsxs)(`div`,{className:`relative my-8!`,children:[(0,_.jsx)(f,{className:`bg-normaltext!`}),(0,_.jsx)(`span`,{className:`absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 px-4 text-sm text-foreground-tertiary`,children:e(`or`)})]}),(0,_.jsx)(`p`,{className:`text-center`,children:(0,_.jsx)(i,{to:`/auth/login`,className:`text-foreground font-bold! hover:text-(--systemtext)`,children:e(`back_to_login`)})})]})})}var b=y;export{b as default};