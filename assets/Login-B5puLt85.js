import{t as e}from"./password-input-a1UGY-C-.js";import{C as t,F as n,G as r,H as i,J as a,K as o,L as s,Q as c,R as l,T as u,W as d,X as f,Y as p,Z as m,c as h,g,l as _,m as v,q as y,w as b,x,y as S}from"./index-DrylHBWn.js";var C=c(m()),w=c(i());function T(){let i=y(),o=p(),{t:c}=d(),[m]=a(),h=f(x),{register:S,handleSubmit:C,formState:{errors:T}}=l({resolver:s(g)});return(0,w.jsxs)(`form`,{onSubmit:C(async e=>{o(b());try{let t=await n.login(e);if(t.access_token&&localStorage.setItem(`access_token`,t.access_token),t.refresh_token&&localStorage.setItem(`refresh_token`,t.refresh_token),t.user&&localStorage.setItem(`user`,JSON.stringify(t.user)),t.user.verified){let e=m.get(`continue`)||`/`;i(e),o(u(t)),r.success(`${c(`login_success`)}: ${c(`greeting`,{username:t.user.username})}`)}else i(`/verify-email?token=${t.access_token}`),r.info(`${c(`login_success`)}`)}catch(e){let n=typeof e==`string`?e:e.response?.data?.message||e.message||`Unknown Error`;o(t(e)),r.error(`${c(`login_fail`)}: ${n}`)}}),className:`w-full flex flex-col gap-2`,children:[(0,w.jsx)(_,{type:`text`,placeholder:c(`email`),...S(`username`),className:`
                        h-12
                        bg-background
                        border-input-border
                        rounded-2xl
                        text-normaltext
                        placeholder:text-normaltext-tertiary
                        ${T.username?`border-destructive`:``}
                        `,disabled:h}),T.username&&(0,w.jsx)(`p`,{className:`text-destructive`,children:T.username.message}),(0,w.jsx)(e,{placeholder:c(`password`),...S(`password`),className:`h-12 bg-background border-input-border rounded-xl
                    text-normaltext placeholder:text-normaltext-tertiary
                    ${T.password?`border-destructive`:``}
                  `,disabled:h}),T.password&&(0,w.jsx)(`p`,{className:`text-destructive`,children:T.password.message}),(0,w.jsx)(v,{type:`submit`,className:`w-full h-12 bg-foreground text-background !hover:bg-systemtext cursor-pointer rounded-2xl`,disabled:h,children:c(h?`loging_in`:`login`)})]})}var E=T;function D(){let e=y(),[t]=a(),{t:n}=d(),r=S();return(0,C.useEffect)(()=>{if(r)if(r.verified){let n=t.get(`continue`)||`/`;e(n)}else `${localStorage.getItem(`access_token`)}`},[r,e,t]),(0,w.jsxs)(`div`,{className:`max-w-[370px] min-w-[300px] p-6! mx-auto! flex flex-col gap-2 absolute top-full left-[50%] -translate-x-[50%] translate-y-[65%]`,children:[(0,w.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,w.jsx)(`h1`,{className:`text-center text-base sm:text-lg! sm:my-4 text-foreground font-bold! text-[16px]`,children:n(`login_threads`)}),(0,w.jsx)(E,{}),(0,w.jsx)(`div`,{className:`text-center`,children:(0,w.jsx)(o,{to:`/auth/forgot-password`,className:`text-sm text-foreground`,children:n(`forgot_psw`)})}),(0,w.jsxs)(`div`,{className:`relative my-6!`,children:[(0,w.jsx)(h,{className:`bg-normaltext!`}),(0,w.jsx)(`span`,{className:`absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 px-4 text-sm text-systemtext!`,children:n(`or`)})]})]}),(0,w.jsxs)(`div`,{className:`text-center`,children:[n(`havent_got_account`),(0,w.jsx)(o,{to:`/auth/register`,className:`text-foreground font-semibold hover:underline`,children:n(`register`)}),n(`or`),(0,w.jsx)(o,{to:`/`,className:`text-foreground font-semibold hover:underline`,children:n(`home`)})]})]})}var O=D;export{O as default};